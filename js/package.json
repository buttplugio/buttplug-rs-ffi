{
  "name": "buttplug",
  "collaborators": [
    "Nonpolynomial, LLC <kyle@nonpolynomial.com>"
  ],
  "description": "Buttplug WASM library for web applications (Node/Web). Does not work for native node at the moment.",
  "version": "1.0.14",
  "license": "BSD-3-Clause",
  "homepage": "https://buttplug.io",
  "repository": {
    "type": "git",
    "url": "https://github.com/buttplugio/buttplug-rs-ffi"
  },
  "bugs": {
    "url": "https://github.com/buttplugio/buttplug-rs-ffi/issues"
  },
  "ffi-version": "2.0.2",
  "scripts": {
    "install": "node-gyp-build && node scripts/install_core.js",

    "prebuild:win32": "prebuildify --napi --tag-uv --tag-armv --platform win32",
    "prebuild:darwin": "prebuildify --napi --tag-uv --tag-armv --platform darwin",
    "prebuild:linux": "prebuildify --napi --tag-uv --tag-armv --platform linux",
    "prebuild": "yarn prebuild:win32 && yarn prebuild:darwin && yarn prebuild:linux",

    "build:rust:node": "node scripts/install_core.js --build",
    "build:rust:web": "rimraf src/web/buttplug-rs-ffi && cd ../ffi && cross-env RUSTFLAGS=\"--cfg=web_sys_unstable_apis\" wasm-pack build -d../js/src/web/buttplug-rs-ffi --release -- --features wasm --no-default-features && cd ../js && rimraf src/web/buttplug-rs-ffi/.gitignore src/web/buttplug-rs-ffi/package.json src/web/buttplug-rs-ffi/README.md",
    "build:rust": "yarn build:rust:node && yarn build:rust:web",

    "build:proto": "pbjs -t static-module -w es6 -o src/buttplug_ffi.js ../protobuf_schemas/buttplug_rs_ffi.proto && node scripts/modularize.cjs && pbjs -t static-module ../protobuf_schemas/buttplug_rs_ffi.proto | pbts -o src/buttplug_ffi.d.ts -",

    "build:node:rust": "node scripts/install_core.js",
    "build:node:gyp": "yarn prebuild",
    "build:node:tsc": "tsc -p tsconfig.json && copyfiles -u 1 \"src/**/*.{js,d.ts}\" --exclude \"src/web/**/*.*\" dist/node",
    "build:node": "yarn build:node:rust && yarn build:node:gyp && yarn build:node:tsc",

    "test:node": "yarn build:node && node scripts/test_node.cjs",

    "build:web:rust": "yarn build:rust:web",
    "build:web:webpack": "webpack --progress --config webpack.base.cjs --env development",
    "build:web:webpack:production": "webpack --progress --config webpack.base.cjs --env production",
    "build:web": "yarn build:web:rust && yarn build:web:webpack",
    "build:web:production": "yarn build:web:rust && yarn build:web:webpack:production",

    "build": "yarn build:proto && yarn build:node && yarn build:web",
    "build:production": "yarn build:proto && yarn build:node && yarn build:webpack:production",
    "build:publish": "rimraf dist && rimraf bin && rimraf build && yarn build:production",

    "build:local": "cross-env BUTTPLUG_FFI_INSTALL_CORE_BUILD=true yarn build",
    "build:local:production": "cross-env BUTTPLUG_FFI_INSTALL_CORE_BUILD=true yarn build:production",

    "clean:node:gyp": "rimraf build && rimraf prebuilds",
    "clean:node": "rimraf dist/node && rimraf bin && yarn clean:node:gyp",
    "clean:web": "rimraf dist/web && rimraf src/web/buttplug-rs-ffi",
    "clean": "yarn clean:node && yarn clean:web && rimraf dist",

    "dev": "webpack-dev-server --hot --config webpack.base.js --env development",
    "build:webpack": "yarn build:web",
    "build:webpack:production": "yarn build:web:production"
  },
  "sideEffects": "false",
  "type": "module",
  "main": "./dist/node/index.js",
  "exports": {
    "node": "./dist/node/index.js",
    "browser": [
      "./dist/web/buttplug.min.js",
      "./dist/web/buttplug.js"
    ]
  },
  "imports": {
    "#ffi_wrap": {
      "node": "./dist/node/node/ffi_wrap.js"
    }
  },
  "types": "./dist/node/index.d.ts",
  "dependencies": {
    "node-addon-api": "^4.0.0",
    "node-gyp-build": "^4.2.3",
    "protobufjs": "^6.10.2"
  },
  "devDependencies": {
    "@types/node": "15",
    "copyfiles": "^2.4.1",
    "cross-env": "^7.0.3",
    "fork-ts-checker-webpack-plugin": "^6.1.0",
    "html-loader": "^1.3.2",
    "prebuildify": "^4.1.2",
    "rimraf": "^3.0.2",
    "ts-loader": "^8",
    "ts-node": "^9.1.1",
    "ts-proto": "^1.80.1",
    "typescript": "4.3",
    "uglify-js": "^3.12.7",
    "webpack": "^4",
    "webpack-cli": "^3",
    "webpack-dev-server": "^3.11.2",
    "webpack-merge": "^5.7.3",
    "yarn": "^1.22.10"
  }
}
